{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/anastasiia/Desktop/projects/react-0.2/06-notehub-nextjs/lib/api.ts"],"sourcesContent":["import axios from 'axios';\nimport type { Note } from '../types/note';\n\nconst BASE_URL = 'https://notehub-public.goit.study/api';\n\nconst NOTEHUB_TOKEN = process.env.NEXT_PUBLIC_NOTEHUB_TOKEN as string | undefined;\n\nconst getToken = () => {\n  const token = process.env.NEXT_PUBLIC_NOTEHUB_TOKEN as string | undefined;\n  if (!token) throw new Error('Missing env variable: NEXT_PUBLIC_NOTEHUB_TOKEN');\n  return token;\n};\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    accept: 'application/json',\n    Authorization: `Bearer ${NOTEHUB_TOKEN}`,\n  },\n});\n\napi.interceptors.request.use((config) => {\n  config.headers.Authorization = `Bearer ${getToken()}`;\n  return config;\n});\n\ninterface FetchNotesParams {\n  search?: string;\n  page?: number;\n  perPage?: number;\n}\n\nexport interface NoteResponse {\n  notes: Note[];\n  totalPages: number;\n}\n\nexport const fetchNotes = async (params: FetchNotesParams): Promise<NoteResponse> => {\n  try {\n    const response = await api.get<NoteResponse>('/notes', {\n      params: {\n        search: params.search,\n        page: params.page ?? 1,\n        perPage: params.perPage ?? 10,\n      },\n    });\n    // console.log(\"API response:\", response.data);\n    // console.log(\"Note array:\", response.data.notes);\n    return response.data;\n  } catch (error: unknown) {\n    if (axios.isAxiosError(error)) {\n      console.log('Axios error:', error.message);\n      console.log('Status:', error.response?.status);\n      console.log('Response:', error.response?.data);\n    }\n    throw error;\n  }\n};\n\nexport const createNote = async (note: Omit<Note, 'id'>): Promise<Note> => {\n  try {\n    const { data } = await api.post<Note>('/notes', note);\n    return data;\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      console.log(error.response?.data);\n    }\n    throw error;\n  }\n};\n\nexport const deleteNote = async (id: string): Promise<Note> => {\n  const { data } = await api.delete<Note>(`/notes/${id}`);\n  return data;\n};\n\nexport const fetchNoteById = async (id: string): Promise<Note> => {\n  const { data } = await axios.get<Note>(`/notes/${id}`);\n  return data;\n};\n"],"names":[],"mappings":";;;;;;;;;;AAKsB;AALtB;;AAGA,MAAM,WAAW;AAEjB,MAAM;AAEN,MAAM,WAAW;IACf,MAAM;IACN;;IACA,OAAO;AACT;AAEA,MAAM,MAAM,wNAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,QAAQ;QACR,eAAe,CAAC,OAAO,EAAE,eAAe;IAC1C;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,YAAY;IACrD,OAAO;AACT;AAaO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,GAAG,CAAe,UAAU;YACrD,QAAQ;gBACN,QAAQ,OAAO,MAAM;gBACrB,MAAM,OAAO,IAAI,IAAI;gBACrB,SAAS,OAAO,OAAO,IAAI;YAC7B;QACF;QACA,+CAA+C;QAC/C,mDAAmD;QACnD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAgB;QACvB,IAAI,wNAAK,CAAC,YAAY,CAAC,QAAQ;YAC7B,QAAQ,GAAG,CAAC,gBAAgB,MAAM,OAAO;YACzC,QAAQ,GAAG,CAAC,WAAW,MAAM,QAAQ,EAAE;YACvC,QAAQ,GAAG,CAAC,aAAa,MAAM,QAAQ,EAAE;QAC3C;QACA,MAAM;IACR;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAO,UAAU;QAChD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,IAAI,wNAAK,CAAC,YAAY,CAAC,QAAQ;YAC7B,QAAQ,GAAG,CAAC,MAAM,QAAQ,EAAE;QAC9B;QACA,MAAM;IACR;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,MAAM,CAAO,CAAC,OAAO,EAAE,IAAI;IACtD,OAAO;AACT;AAEO,MAAM,gBAAgB,OAAO;IAClC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,wNAAK,CAAC,GAAG,CAAO,CAAC,OAAO,EAAE,IAAI;IACrD,OAAO;AACT"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///Users/anastasiia/Desktop/projects/react-0.2/06-notehub-nextjs/app/notes/Notes.client.tsx"],"sourcesContent":["'use client';\n\nimport { useQuery } from '@tanstack/react-query';\nimport { useParams } from 'next/navigation';\nimport { fetchNoteById } from '@/lib/api';\n\nconst NotesClient = () => {\n  const { id } = useParams<{ id: string }>();\n\n  const {\n    data: note,\n    isLoading,\n    error,\n  } = useQuery({\n    queryKey: ['note', id],\n    queryFn: () => fetchNoteById(id),\n    refetchOnMount: false,\n  });\n\n  if (isLoading) return <p>Loading...</p>;\n\n  if (error || !note) return <p>Some error..</p>;\n\n  const formattedDate = note.updatedAt\n    ? `Updated at: ${note.updatedAt}`\n    : `Created at: ${note.createdAt}`;\n\n  return (\n    <div>\n      <h2>{note.title}</h2>\n      <p>{note.content}</p>\n      <p>{formattedDate}</p>\n    </div>\n  );\n};\n\nexport default NotesClient;\n"],"names":["c","_c","useQuery","useParams","fetchNoteById","NotesClient","$","$i","Symbol","for","id","t0","queryKey","queryFn","refetchOnMount","data","note","isLoading","error","t1","formattedDate","updatedAt","createdAt","title","t2","content","t3","t4"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,aAAa,QAAQ,WAAW;;;AAJzC,YAAY;;;;;AAMZ,oBAAoBC,CAAA;;IAAA,MAAAC,CAAA,OAAAL,qPAAA,EAAA;IAAA,IAAAK,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAClB,MAAA,EAAAI,EAAAA,EAAA;IAA2C,IAAAC,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAI,EAAA,EAAA;QAM9BC,EAAA,GAAA;YAAAC,QAAA,EACD;gBAAC,MAAM;gBAAEF,EAAE;aAAC;YAAAG,OAAA,EACbA,CAAA,OAAMT,mMAAa,EAACM,EAAE,CAAC;YAAAI,cAAA,EAChB;QAClB,CAAC;QAAAR,CAAA,CAAA,EAAA,GAAAI,EAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IARD,MAAA,EAAAS,IAAA,EAAAC,IAAA,EAAAC,SAAA,EAAAC,KAAAA,EAAA,wQAIaP,EAIZ,CAAC;IAEF,IAAIM,SAAS,EAAA;QAAA,IAAAE,EAAA;QAAA,IAAAb,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAASU,EAAA,iBAAA,kQAAA,CAAiB;0BAAd,UAAU,EAAb,CAAiB;;;;;;YAAAb,CAAA,CAAA,EAAA,GAAAa,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAb,CAAA,CAAA,EAAA;QAAA;QAAA,OAAjBa,EAAiB;IAAA;IAEvC,IAAID,KAAc,IAAd,CAAUF,IAAI,EAAA;QAAA,IAAAG,EAAA;QAAA,IAAAb,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAASU,EAAA,iBAAA,kQAAA,CAAmB;0BAAhB,YAAY,EAAf,CAAmB;;;;;;YAAAb,CAAA,CAAA,EAAA,GAAAa,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAb,CAAA,CAAA,EAAA;QAAA;QAAA,OAAnBa,EAAmB;IAAA;IAE9C,MAAAC,aAAA,GAAsBJ,IAAI,CAAAK,SAES,GAFb,CAAA,YAAA,EACHL,IAAI,CAAAK,SAAU,EACE,GAFb,CAAA,YAAA,EAEHL,IAAI,CAAAM,SAAU,EAAE;IAAC,IAAAH,EAAA;IAAA,IAAAb,CAAA,CAAA,EAAA,KAAAU,IAAA,CAAAO,KAAA,EAAA;QAIhCJ,EAAA,iBAAA,kQAAA,EAAqB,CAAhB;sBAAAH,IAAI,CAAAO,KAAK,CAAE,EAAhB,EAAqB;;;;;;QAAAjB,CAAA,CAAA,EAAA,GAAAU,IAAA,CAAAO,KAAA;QAAAjB,CAAA,CAAA,EAAA,GAAAa,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAb,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAkB,EAAA;IAAA,IAAAlB,CAAA,CAAA,EAAA,KAAAU,IAAA,CAAAS,OAAA,EAAA;QACrBD,EAAA,iBAAA,kQAAA,CAAqB,CAAjB;sBAAAR,IAAI,CAAAS,OAAO,CAAE,EAAjB,CAAqB;;;;;;QAAAnB,CAAA,CAAA,EAAA,GAAAU,IAAA,CAAAS,OAAA;QAAAnB,CAAA,CAAA,EAAA,GAAAkB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAlB,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAoB,EAAA;IAAA,IAAApB,CAAA,CAAA,EAAA,KAAAc,aAAA,EAAA;QACrBM,EAAA,iBAAA,kQAAA,CAAsB,CAAlBN;sBAAAA,aAAY,CAAE,EAAlB,CAAsB;;;;;;QAAAd,CAAA,CAAA,EAAA,GAAAc,aAAA;QAAAd,CAAA,CAAA,GAAA,GAAAoB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAApB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAqB,EAAA;IAAA,IAAArB,CAAA,CAAA,GAAA,KAAAa,EAAA,IAAAb,CAAA,CAAA,GAAA,KAAAkB,EAAA,IAAAlB,CAAA,CAAA,GAAA,KAAAoB,EAAA,EAAA;QAHxBC,EAAA,iBAAA,kQAAA,GAIM,CAHJ;;gBAAAR,EAAoB,CACpB;gBAAAK,EAAoB,CACpB;gBAAAE,EAAqB,CACvB,EAJA,GAIM;;;;;;;QAAApB,CAAA,CAAA,GAAA,GAAAa,EAAA;QAAAb,CAAA,CAAA,GAAA,GAAAkB,EAAA;QAAAlB,CAAA,CAAA,GAAA,GAAAoB,EAAA;QAAApB,CAAA,CAAA,GAAA,GAAAqB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAArB,CAAA,CAAA,GAAA;IAAA;IAAA,OAJNqB,EAIM;AAAA,CAET;;;QA3BgBxB,uNAAS,CAAiB,CAAC;QAMtCD,+PAAQ;;;KAPRG,WAAW;uCA8BFA,WAAW","ignoreList":[]}}]
}