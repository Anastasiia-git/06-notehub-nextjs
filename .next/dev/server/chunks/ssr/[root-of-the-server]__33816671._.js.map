{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/anastasiia/Desktop/projects/react-0.2/06-notehub-nextjs/lib/api.ts"],"sourcesContent":["import axios from 'axios';\nimport type { Note } from '../types/note';\n\nconst BASE_URL = 'https://notehub-public.goit.study/api';\n\nconst NOTEHUB_TOKEN = process.env.NEXT_PUBLIC_NOTEHUB_TOKEN as string | undefined;\n\nconst getToken = () => {\n  const token = process.env.NEXT_PUBLIC_NOTEHUB_TOKEN as string | undefined;\n  if (!token) throw new Error('Missing env variable: NEXT_PUBLIC_NOTEHUB_TOKEN');\n  return token;\n};\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    accept: 'application/json',\n    Authorization: `Bearer ${NOTEHUB_TOKEN}`,\n  },\n});\n\napi.interceptors.request.use((config) => {\n  config.headers.Authorization = `Bearer ${getToken()}`;\n  return config;\n});\n\ninterface FetchNotesParams {\n  search?: string;\n  page?: number;\n  perPage?: number;\n}\n\nexport interface NoteResponse {\n  notes: Note[];\n  totalPages: number;\n}\n\nexport const fetchNotes = async (params: FetchNotesParams): Promise<NoteResponse> => {\n  try {\n    const response = await api.get<NoteResponse>('/notes', {\n      params: {\n        search: params.search,\n        page: params.page ?? 1,\n        perPage: params.perPage ?? 10,\n      },\n    });\n    // console.log(\"API response:\", response.data);\n    // console.log(\"Note array:\", response.data.notes);\n    return response.data;\n  } catch (error: unknown) {\n    if (axios.isAxiosError(error)) {\n      console.log('Axios error:', error.message);\n      console.log('Status:', error.response?.status);\n      console.log('Response:', error.response?.data);\n    }\n    throw error;\n  }\n};\n\nexport const createNote = async (note: Omit<Note, 'id'>): Promise<Note> => {\n  try {\n    const { data } = await api.post<Note>('/notes', note);\n    return data;\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      console.log(error.response?.data);\n    }\n    throw error;\n  }\n};\n\nexport const deleteNote = async (id: string): Promise<Note> => {\n  const { data } = await api.delete<Note>(`/notes/${id}`);\n  return data;\n};\n\nexport const fetchNoteById = async (id: string): Promise<Note> => {\n  const { data } = await axios.get<Note>(`/notes/${id}`);\n  return data;\n};\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAGA,MAAM,WAAW;AAEjB,MAAM;AAEN,MAAM,WAAW;IACf,MAAM;IACN;;IACA,OAAO;AACT;AAEA,MAAM,MAAM,qNAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,QAAQ;QACR,eAAe,CAAC,OAAO,EAAE,eAAe;IAC1C;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,YAAY;IACrD,OAAO;AACT;AAaO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,GAAG,CAAe,UAAU;YACrD,QAAQ;gBACN,QAAQ,OAAO,MAAM;gBACrB,MAAM,OAAO,IAAI,IAAI;gBACrB,SAAS,OAAO,OAAO,IAAI;YAC7B;QACF;QACA,+CAA+C;QAC/C,mDAAmD;QACnD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAgB;QACvB,IAAI,qNAAK,CAAC,YAAY,CAAC,QAAQ;YAC7B,QAAQ,GAAG,CAAC,gBAAgB,MAAM,OAAO;YACzC,QAAQ,GAAG,CAAC,WAAW,MAAM,QAAQ,EAAE;YACvC,QAAQ,GAAG,CAAC,aAAa,MAAM,QAAQ,EAAE;QAC3C;QACA,MAAM;IACR;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,CAAO,UAAU;QAChD,OAAO;IACT,EAAE,OAAO,OAAO;QACd,IAAI,qNAAK,CAAC,YAAY,CAAC,QAAQ;YAC7B,QAAQ,GAAG,CAAC,MAAM,QAAQ,EAAE;QAC9B;QACA,MAAM;IACR;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,MAAM,CAAO,CAAC,OAAO,EAAE,IAAI;IACtD,OAAO;AACT;AAEO,MAAM,gBAAgB,OAAO;IAClC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,qNAAK,CAAC,GAAG,CAAO,CAAC,OAAO,EAAE,IAAI;IACrD,OAAO;AACT"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///Users/anastasiia/Desktop/projects/react-0.2/06-notehub-nextjs/app/notes/Notes.client.tsx"],"sourcesContent":["'use client';\n\nimport { useQuery } from '@tanstack/react-query';\nimport { useParams } from 'next/navigation';\nimport { fetchNoteById } from '@/lib/api';\n\nconst NotesClient = () => {\n  const { id } = useParams<{ id: string }>();\n\n  const {\n    data: note,\n    isLoading,\n    error,\n  } = useQuery({\n    queryKey: ['note', id],\n    queryFn: () => fetchNoteById(id),\n    refetchOnMount: false,\n  });\n\n  if (isLoading) return <p>Loading...</p>;\n\n  if (error || !note) return <p>Some error..</p>;\n\n  const formattedDate = note.updatedAt\n    ? `Updated at: ${note.updatedAt}`\n    : `Created at: ${note.createdAt}`;\n\n  return (\n    <div>\n      <h2>{note.title}</h2>\n      <p>{note.content}</p>\n      <p>{formattedDate}</p>\n    </div>\n  );\n};\n\nexport default NotesClient;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,cAAc;IAClB,MAAM,EAAE,EAAE,EAAE,GAAG,IAAA,oNAAS;IAExB,MAAM,EACJ,MAAM,IAAI,EACV,SAAS,EACT,KAAK,EACN,GAAG,IAAA,4PAAQ,EAAC;QACX,UAAU;YAAC;YAAQ;SAAG;QACtB,SAAS,IAAM,IAAA,gMAAa,EAAC;QAC7B,gBAAgB;IAClB;IAEA,IAAI,WAAW,qBAAO,mTAAC;kBAAE;;;;;;IAEzB,IAAI,SAAS,CAAC,MAAM,qBAAO,mTAAC;kBAAE;;;;;;IAE9B,MAAM,gBAAgB,KAAK,SAAS,GAChC,CAAC,YAAY,EAAE,KAAK,SAAS,EAAE,GAC/B,CAAC,YAAY,EAAE,KAAK,SAAS,EAAE;IAEnC,qBACE,mTAAC;;0BACC,mTAAC;0BAAI,KAAK,KAAK;;;;;;0BACf,mTAAC;0BAAG,KAAK,OAAO;;;;;;0BAChB,mTAAC;0BAAG;;;;;;;;;;;;AAGV;uCAEe"}}]
}